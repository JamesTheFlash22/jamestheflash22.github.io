<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoralStats</title>
  <meta property="og:title" content="CoralStats">
  <meta property="og:description" content="Visualizza statistiche e match recenti di Bedwars e KitPvP su CoralMC. Inserisci il tuo username e scopri i tuoi progressi!">
  <meta property="og:image" content="https://jamestheflash.is-a.dev/coral.png">
  <meta property="og:url" content="https://jamestheflash.is-a.dev">
  <meta property="og:type" content="website">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js" defer></script>
</head>
<body class="min-h-screen p-6">
  <div class="max-w-4xl mx-auto">
    <img src="logo.png" alt="CoralMC Logo" class="mx-auto mb-4 w-64">
    <h1 class="text-3xl font-bold text-center mb-8 text-blue-500">CoralStats</h1>
    <section class="mb-8 bg-gray-800 p-6 rounded-lg shadow-lg">
      <h2 class="text-xl font-semibold mb-4">Info Giocatore e Stats</h2>
      <div class="flex gap-2">
        <input type="text" id="username" placeholder="Inserisci username" class="w-full p-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button onclick="getPlayerData()" class="px-4 py-2 bg-blue-700 hover:bg-blue-800 rounded transition">Carica Dati</button>
      </div>
      <div id="playerProfile" class="mt-4 flex items-center gap-4"></div>
      <div class="tab mt-4">
        <button class="tablinks" onclick="openTab(event, 'bedwarsTab')" id="defaultOpen">Bedwars Stats</button>
        <button class="tablinks" onclick="openTab(event, 'kitpvpTab')">KitPvP Stats</button>
      </div>
      <div id="bedwarsTab" class="tabcontent grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
        <div id="bedwarsText" class="bg-gray-700 p-4 rounded-lg"></div>
        <div class="bg-gray-700 p-4 rounded-lg">
          <canvas id="bedwarsChart"></canvas>
        </div>
      </div>
      <div id="kitpvpTab" class="tabcontent grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
        <div id="kitpvpText" class="bg-gray-700 p-4 rounded-lg"></div>
        <div class="bg-gray-700 p-4 rounded-lg">
          <canvas id="kitpvpChart"></canvas>
        </div>
      </div>
    </section>
    <section class="mb-8 bg-gray-800 p-6 rounded-lg shadow-lg">
      <h2 class="text-xl font-semibold mb-4">Match Recenti (Bedwars)</h2>
      <button onclick="getRecentMatches()" class="px-4 py-2 bg-blue-700 hover:bg-blue-800 rounded transition mb-4">Carica Match (usa username sopra)</button>
      <div class="flex gap-2 mb-4">
        <input type="text" id="matchIdInput" placeholder="Inserisci ID match" class="w-full p-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button onclick="viewMatchById()" class="px-4 py-2 bg-blue-700 hover:bg-blue-800 rounded transition">Visualizza Match</button>
      </div>
      <div class="overflow-x-auto">
        <table id="matchesTable" class="w-full text-left">
          <thead class="bg-gray-700">
            <tr>
              <th class="p-3">ID</th>
              <th class="p-3">Arena</th>
              <th class="p-3">Tipo</th>
              <th class="p-3">Risultato</th>
              <th class="p-3">Durata</th>
              <th class="p-3">Data</th>
              <th class="p-3">Dettagli</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
    <div id="error" class="text-red-500 text-center"></div>
  </div>
  <div id="matchModal">
    <div id="matchModalContent">
      <span id="closeModal" onclick="closeModal()">&times;</span>
      <div id="modalMatchDetails" class="mb-4"></div>
      <div class="overflow-x-auto">
        <table id="modalPlayerStatsTable" class="w-full text-left">
          <thead class="bg-gray-700">
            <tr>
              <th class="p-3">Giocatore</th>
              <th class="p-3">Squadra</th>
              <th class="p-3">Kills</th>
              <th class="p-3">Final Kills</th>
              <th class="p-3">Deaths</th>
              <th class="p-3">Letti Rotti</th>
              <th class="p-3">Score</th>
              <th class="p-3">K/D</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
      <div id="modalError" class="text-red-500 mt-4"></div>
    </div>
  </div>
</body>
</html>
